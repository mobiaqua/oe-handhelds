#@TYPE: Machine
#@NAME: IGEP machine
#@DESCRIPTION: Machine configuration for the IGEPv3.0 board
TARGET_ARCH = "arm"

# Floating point option
TARGET_FPU_arm = "hard"
ARM_FP_ABI = "hardfp"

# Only has DVI connector for external screen
GUI_MACHINE_CLASS = "bigscreen"

include conf/machine/include/tune-cortexa8.inc

EXTRA_IMAGECMD_jffs2 = "-lnp -e 256KiB"

UBI_VOLNAME = "${MACHINE}-rootfs"

# do ubiattach /dev/ubi_ctrl -m 4
# From dmesg:
# UBI: smallest flash I/O unit:    4096
# UBI: logical eraseblock size:    258048 bytes
# from ubiattach stdout:
# UBI device number 0, total 2024 LEBs
MKUBIFS_ARGS = "-m 4096 -e 258048 -c 2024"

# do ubiattach /dev/ubi_ctrl -m 4
# from dmesg:
# UBI: smallest flash I/O unit:    4096
# UBI: physical eraseblock size:   262144 bytes (256 KiB)
# UBI: sub-page size:              1024
UBINIZE_ARGS = "-m 4096 -p 256KiB -s 1024"

SERIAL_CONSOLE = "115200 ttyS2"

PREFERRED_PROVIDER_virtual/kernel = "linux-igep"
PREFERRED_PROVIDER_virtual/bootloader = "u-boot-igep"

KERNEL_IMAGETYPE = "zImage"

UBOOT_ENTRYPOINT = "0x80008000"
UBOOT_LOADADDRESS = "0x80008000"

OVERRIDES .= ":${FEED_ARCH}"

IMAGE_FSTYPES = "tar.gz"
